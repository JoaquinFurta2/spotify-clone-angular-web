@let iscurrPlaylist = playerService.getCurrentPlaylistId() === cardData().id;
@let isPlaying = playerService.isPlaying();

<div class="library__card-cont">
    <div class="library__card" [class.active]="iscurrPlaylist" [class.is-playing]="isPlaying && iscurrPlaylist"  #cardCont (mouseenter)="hService.currentHoverColor.set(cardData().color)" (dblclick)="onClick($event)">
        <div class="library__card__img-cont" cdkOverlayOrigin #cont (mouseenter)="getWidth()" (mouseleave)="isHover.set(false)">
            <img ngSrc="{{cardData().icon}}" width="48" height="48" alt="">
            <button (click)="onClick($event)" class="play__btn">
                @if(iscurrPlaylist && isPlaying){
                    <svg data-encore-id="icon" role="img" aria-hidden="true" viewBox="0 0 24 24"><path d="M5.7 3a.7.7 0 0 0-.7.7v16.6a.7.7 0 0 0 .7.7h2.6a.7.7 0 0 0 .7-.7V3.7a.7.7 0 0 0-.7-.7H5.7zm10 0a.7.7 0 0 0-.7.7v16.6a.7.7 0 0 0 .7.7h2.6a.7.7 0 0 0 .7-.7V3.7a.7.7 0 0 0-.7-.7h-2.6z"></path></svg>
                } @else {
                    <svg data-encore-id="icon" role="img" aria-hidden="true" viewBox="0 0 24 24"><path d="m7.05 3.606 13.49 7.788a.7.7 0 0 1 0 1.212L7.05 20.394A.7.7 0 0 1 6 19.788V4.212a.7.7 0 0 1 1.05-.606z"></path></svg>
                }

            </button>
        </div>
        <div class="library__card__info" >
            <div appOverflowTranslate [triggerAni]="cardCont">
                <h4>{{cardData().title}}</h4>
                <p>Playlist • {{cardData().createdBy}}</p>
            </div>
            <svg class="playing-decor" data-encore-id="icon" role="presentation" aria-label="Volume high" aria-hidden="false" viewBox="0 0 16 16"><path d="M9.741.85a.75.75 0 0 1 .375.65v13a.75.75 0 0 1-1.125.65l-6.925-4a3.642 3.642 0 0 1-1.33-4.967 3.639 3.639 0 0 1 1.33-1.332l6.925-4a.75.75 0 0 1 .75 0zm-6.924 5.3a2.139 2.139 0 0 0 0 3.7l5.8 3.35V2.8l-5.8 3.35zm8.683 4.29V5.56a2.75 2.75 0 0 1 0 4.88z"></path><path d="M11.5 13.614a5.752 5.752 0 0 0 0-11.228v1.55a4.252 4.252 0 0 1 0 8.127v1.55z"></path></svg>
        </div>
        
    </div>  
</div>


<ng-template
    cdkConnectedOverlay
    [cdkConnectedOverlayOrigin]="cont"
    [cdkConnectedOverlayOpen]="isHover()" 
    [cdkConnectedOverlayPositions]="[
    { originX:'end', originY:'center', overlayX:'start', overlayY:'center'}
    ]">
        
    <div class="hover__info" [class.active]="iscurrPlaylist" [class.is-playing]="isPlaying && iscurrPlaylist">
        <div>
            <h4>{{cardData().title}}</h4>
            <p>Playlist • {{cardData().createdBy}}</p>
        </div>
        <svg class="hover__play-decor" data-encore-id="icon" role="presentation" aria-label="Volume high" aria-hidden="false" viewBox="0 0 16 16"><path d="M9.741.85a.75.75 0 0 1 .375.65v13a.75.75 0 0 1-1.125.65l-6.925-4a3.642 3.642 0 0 1-1.33-4.967 3.639 3.639 0 0 1 1.33-1.332l6.925-4a.75.75 0 0 1 .75 0zm-6.924 5.3a2.139 2.139 0 0 0 0 3.7l5.8 3.35V2.8l-5.8 3.35zm8.683 4.29V5.56a2.75 2.75 0 0 1 0 4.88z"></path><path d="M11.5 13.614a5.752 5.752 0 0 0 0-11.228v1.55a4.252 4.252 0 0 1 0 8.127v1.55z"></path></svg>
    </div>
</ng-template>
    
